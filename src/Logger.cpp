#include "Logger.h"
#include "SysUtils.h"

//###############################################################################
//  logging
//###############################################################################
LOGGING::LOGGING(Clock &clock) : clock(clock) {}

//-------------------------------------------------------------------------------
//  LOGGING public
//-------------------------------------------------------------------------------

//...............................................................................
//  start
//...............................................................................

void LOGGING::start() {
  Serial.begin(115200);
  info("logging started");
}

//...............................................................................
//  log
//...............................................................................
void LOGGING::log(const String &channel, const String &msg) {
  char txt[1024];
  String T = SysUtils::strDateTime(clock.now());
  sprintf(txt, "%s %5s %s", T.c_str(), channel.c_str(), msg.c_str());
  Serial.println(txt);
}

//...............................................................................
//  INFO
//...............................................................................
void LOGGING::info(const String &msg) { log(" INFO", msg); }

//...............................................................................
//  DEBUG
//...............................................................................
void LOGGING::debug(const String &msg) { log("DEBUG", msg); }

//...............................................................................
//  ERROR
//...............................................................................
void LOGGING::error(const String &msg) { log("ERROR", msg); }
