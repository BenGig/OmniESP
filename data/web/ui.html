<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

    <head>
        <title>ESP8266 P&amp;N</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <script src="lib/jquery.js"></script>
        <script src="lib/jquery.mobile.js"></script>
        <link href="css/jquery.mobile.css" rel="stylesheet" />
        <script src="auth.js"></script>
        <script src="panels.js"></script>
        <script src="config.js"></script>
        <script src="ui.js"></script>
    </head>

    <body>
        <!--

                page 1

        -->
        <div data-role="page" data-theme="a" id="page1">
            <div data-role="header">
                <a href="https://github.com/Pfannex/ADE7953_Breakoutboard/wiki" target="_blank"
                id="info" class="ui-btn ui-corner-all ui-shadow ui-icon-info ui-btn-icon-left">Info</a>
                <h1>ESP8266 P&amp;N</h1>
                <a class="ui-btn ui-corner-all ui-shadow ui-icon-delete ui-btn-icon-left" onClick="logout()">Logout</a>
                <div data-role="navbar">
                    <ul>
                        <li><a href="#page1" data-transition="flow" data-icon="gear" data-role="button" class="ui-btn-active ui-state-persist">Configuration</a></li>
                        <li><a href="#page2" data-transition="flow" data-icon="eye" data-role="button">Readings</a></li>
                        <li><a href="#page3" data-transition="flow" data-icon="comment" data-role="button">Log</a></li>
                    </ul>
                </div>
            </div>
            <div data-role="content">
                <form id="configForm"  method="POST">
                    <input type="hidden" name="action" value="apply"/>
                    <div data-role="collapsible">
                        <h1>Device</h1>
                        <div data-role="fieldcontain">
                            <label for="device_name">Name</label>
                            <input type="text" id="device_name" name="device_name" placeholder="hostname and MQTT device name"/>
                        </div>
                        <div data-role="fieldcontain">
                            <label for="device_username">Username</label>
                            <input type="text" id="device_username" name="device_username" placeholder="login name for user"/>
                        </div>
                        <div data-role="fieldcontain">
                            <label for="device_password">Password</label>
                            <input type="password" id="device_password" name="device_password" placeholder"password for user"/>
                        </div>
                        <a data-role="button" class="ui-btn ui-btn-inline ui-icon-recycle ui-btn-icon-left" id="reboot" onClick="reboot()">Reboot</a>
                    </div>
                    <div data-role="collapsible">
                        <h1>WiFi</h1>
                        <div><fieldset data-role="controlgroup" data-type="horizontal">
                                <input name="wifi" id="wifi-off" value="off" type="radio" />
                                <label for="wifi-off">Off</label>
                                <input name="wifi" id="wifi-dhcp" value="dhcp" type="radio" />
                                <label for="wifi-dhcp">DHCP</label>
                                <input name="wifi" id="wifi-manual" value="manual" type="radio" />
                                <label for="wifi-manual">Manual</label>
                        </fieldset></div>
			                  <div id="wifi_details">
                            <div data-role="fieldcontain">
                                <label for="wifi_ssid">SSID</label>
                                <input type="text" id="wifi_ssid" name="wifi_ssid" placeholder="wifi network the device connects to"/>
                            </div>
                            <div data-role="fieldcontain">
                                <label for="wifi_password">Password</label>
                                <input type="password" id="wifi_password" name="wifi_password" placeholder="password for the wifi network"/>
                            </div>
    			                  <div id="wifi_net_details">
				                        <hr style="visibility:hidden" />
                                <div data-role="fieldcontain">
                                    <label for="wifi_ip">IP Address</label>
                                    <input type="text" id="wifi_ip" name="wifi_ip" value="10.20.17.101" />
                                </div>
                                <div data-role="fieldcontain">
                                    <label for="wifi_netmask">Netmask</label>
                                    <input type="text" id="wifi_netmask" name="wifi_netmask" value="255.255.255.0" />
                                </div>
                                <div data-role="fieldcontain">
                                    <label for="wifi_gateway">Gateway</label>
                                    <input type="text" id="wifi_gateway" name="wifi_gateway" value="10.20.17.1" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div data-role="collapsible">
                        <h1>LAN</h1>
                        <div><fieldset data-role="controlgroup" data-type="horizontal">
                                <input name="lan" id="lan-off" value="off" type="radio" />
                                <label for="lan-off">Off</label>
                                <input name="lan" id="lan-dhcp" value="dhcp" type="radio" />
                                <label for="lan-dhcp">DHCP</label>
                                <input name="lan" id="lan-manual" value="manual" type="radio" />
                                <label for="lan-manual">Manual</label>
                        </fieldset></div>
                        <div id="lan_net_details">
                            <div data-role="fieldcontain">
                                <label for="lan_ip">IP Address</label>
                                <input type="text" id="lan_ip" name="lan_ip" value="10.20.17.111" />
                            </div>
                            <div data-role="fieldcontain">
                                <label for="lan_netmask">Netmask</label>
                                <input type="text" id="lan_netmask" name="lan_netmask" value="255.255.255.0" />
                            </div>
                            <div data-role="fieldcontain">
                                <label for="lan_gateway">Gateway</label>
                                <input type="text" id="lan_gateway" name="lan_gateway" value="10.20.17.1" />
                            </div>
                        </div>
                    </div>
                    <div data-role="collapsible">
                        <h1>Network Time</h1>
                        <select data-role="slider" id="ntp" name="ntp">
                            <option value="off">Off</option>
                            <option value="on">On</option>
                        </select>
			                  <div id="ntp_details">
                            <div data-role="fieldcontain">
                                <label for="ntp_serverip">NTP Server IP Address</label>
                                <input type="text" id="ntp_serverip" name="ntp_serverip"/>
                            </div>
                        </div>
                    </div>
                    <div data-role="collapsible">
                        <h1>OTA Update</h1>
                        <div data-role="collapsible">
                            <h1>Local Update</h1>
                            <div data-role="fieldcontain">
                                <label for="update_localpath">Path</label>
                                <input type="text" id="update_localpath" name="update_localpath" />
                            </div>
                            <a data-role="button">Update</a>
                            <a data-role="button">Select file...</a>
                        </div>
                        <div data-role="collapsible">
                            <h1>Remote Update</h1>
	                        <input type="checkbox" data-role="flipswitch" data-on-text="Auto" data-off-text="Manual"
                        	   id="update"
                               checked data-wrapper-class="custom-size-flipswitch">
                            <div data-role="fieldcontain">
                                <label for="update_remoteurl">URL</label>
                                <input type="text" id="update_remoteurl" name="update_remoteurl" placeholder="URL of remote update information"/>
                            </div>
                            <a data-role="button">Update</a>
                        </div>
                    </div>
                    <div data-role="collapsible">
                        <h1>MQTT</h1>
                        <select data-role="slider" id="mqtt" name="mqtt">
                            <option value="off">Off</option>
                            <option value="on">On</option>
                        </select>
			                  <div id="mqtt_details">
                            <div data-role="fieldcontain">
                                <label for="mqtt_ip">Broker IP Address</label>
                                <input type="text" id="mqtt_ip" name=="mqtt_ip"/>
                            </div>
                            <div data-role="fieldcontain">
                                <label for="mqtt_port">Broker Port</label>
                                <input type="text" id="mqtt_port" name="mqtt_port"/>
                            </div>
                            <div data-role="fieldcontain">
                                <label for="mqtt_username">Username</label>
                                <input type="text" id="mqtt_username" name="mqtt_username" placeholder="username for MQTT server"/>
                            </div>
                            <div data-role="fieldcontain">
                                <label for="mqtt_password">Password</label>
                                <input type="password" id="mqtt_password" name="mqtt_password" placeholder="password for MQTT server"/>
                            </div>
			                  </div>
                    </div>
                    <a data-role="button" data-icon="check" onClick="apply()">Apply</a>
                </form>
            </div>
            <div data-role="footer">
                <div id="message"></div>
                <!--
                <form action="." method="POST">
                        <input type="submit" id="logout" name="logout" value="Logout" data-role="button" data-icon="delete">
               </form>
               -->
            </div>
            <!-- Popups -->
            <div data-role="popup" id="popupProcessing" class="ui-content"
                 data-dismissible="false" data-position-to="#configForm">
                    <p>Processing configuration....</p>
            </div>
            <div data-role="popup" id="popupRebooting" class="ui-content"
                 data-dismissible="false" data-position-to="#configForm">
                    <p>Rebooting device....</p>
                    <p>You will be automatically redirected to the login page.</p>
            </div>
        </div>


        <!--

                page 2

        -->
        <div data-role="page" data-theme="a" id="page2">
            <div data-role="header">
                <h1>ESP8266 P&amp;N</h1>
                <div data-role="navbar">
                    <ul>
                        <li><a href="#page1" data-transition="flow" data-icon="gear" data-role="button">Configuration</a></li>
                        <li><a href="#page2" data-transition="flow" data-icon="eye" data-role="button" class="ui-btn-active ui-state-persist">Readings</a></li>
                        <li><a href="#page3" data-transition="flow" data-icon="comment" data-role="button">Log</a></li>
                    </ul>
                </div>
            </div>
            <div data-role="content">
		<div class="ui-grid-b">
			<div class="ui-block-a"></div>
			<div class="ui-block-b">Channel A</div>
			<div class="ui-block-c">Channel B</div>
			<div class="ui-block-a">Power</div>
			<div class="ui-block-b">212.0 W</div>
			<div class="ui-block-c">0.0 W</div>
			<div class="ui-block-a">Phase</div>
			<div class="ui-block-b">5,5°</div>
			<div class="ui-block-c">0.0°</div>
		</div>
            </div>
            <div data-role="footer">
                <!--
                <form action="." method="POST">
                        <input type="submit" id="logout" value="Logout" class="ui-btn ui-btn-inline ui-icon-delete ui-btn-icon-left">
               </form>
               -->
            </div>
        </div>


        <!--

                page 3

        -->
        <div data-role="page" data-theme="a" id="page3">
            <div data-role="header">
                <h1>ESP8266 P&amp;N</h1>
                <div data-role="navbar">
                    <ul>
                        <li><a href="#page1" data-transition="flow" data-icon="gear" data-role="button">Configuration</a></li>
                        <li><a href="#page2" data-transition="flow" data-icon="eye" data-role="button">Readings</a></li>
                        <li><a href="#page3" data-transition="flow" data-icon="comment" data-role="button" class="ui-btn-active ui-state-persist">Log</a></li>
                    </ul>
                </div>
            </div>
            <div data-role="content">
            </div>
            <div data-role="footer">
                <!--
                <form action="." method="POST">
                        <input type="submit" id="logout" value="Logout" class="ui-btn ui-btn-inline ui-icon-delete ui-btn-icon-left">
               </form>
               -->
            </div>
     </div>


    </body>

</html>
